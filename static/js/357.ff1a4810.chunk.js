"use strict";(self.webpackChunklearning_platform_commerce=self.webpackChunklearning_platform_commerce||[]).push([[357],{4034:(e,t,s)=>{s.d(t,{r:()=>i});var a,r,n=s(2791);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},l.apply(this,arguments)}function o(e,t){let{title:s,titleId:o,...i}=e;return n.createElement("svg",l({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},i),s?n.createElement("title",{id:o},s):null,a||(a=n.createElement("g",{clipPath:"url(#clip0_3988_5619)"},n.createElement("path",{d:"M2.6362 1.8184C2.1844 1.8184 1.8184 2.1844 1.8184 2.6362V11.3638C1.8184 11.8156 2.1844 12.1816 2.6362 12.1816H11.3638C11.8156 12.1816 12.1816 11.8156 12.1816 11.3638V2.6362C12.1816 2.1844 11.8156 1.8184 11.3638 1.8184H2.6362ZM11.3638 1C11.7977 1 12.2139 1.17238 12.5208 1.47923C12.8276 1.78608 13 2.20225 13 2.6362V11.3638C13 11.7977 12.8276 12.2139 12.5208 12.5208C12.2139 12.8276 11.7977 13 11.3638 13H2.6362C2.20225 13 1.78608 12.8276 1.47923 12.5208C1.17238 12.2139 1 11.7977 1 11.3638V2.6362C1 2.20225 1.17238 1.78608 1.47923 1.47923C1.78608 1.17238 2.20225 1 2.6362 1L11.3638 1ZM9.373 2.461C9.26447 2.461 9.16039 2.50411 9.08365 2.58085C9.00691 2.65759 8.9638 2.76167 8.9638 2.8702V4C8.9638 4.10853 9.00691 4.21261 9.08365 4.28935C9.16039 4.36609 9.26447 4.4092 9.373 4.4092C9.48153 4.4092 9.58561 4.36609 9.66235 4.28935C9.73909 4.21261 9.7822 4.10853 9.7822 4V2.8702C9.7822 2.76167 9.73909 2.65759 9.66235 2.58085C9.58561 2.50411 9.48153 2.461 9.373 2.461ZM2.6464 1.564L3.4642 1.5676L3.4516 4.2352C3.4336 4.4788 3.5116 4.6756 3.7006 4.8574C3.8884 5.038 4.147 5.1202 4.531 5.0974L9.706 5.0998C9.9952 5.0668 10.1986 4.972 10.336 4.8184C10.4728 4.6642 10.5436 4.4566 10.543 4.1746V1.5652H11.3614V4.1734C11.362 4.6468 11.2252 5.0494 10.9462 5.3626C10.6672 5.6758 10.2778 5.8576 9.7522 5.9146H4.5562C3.9808 5.95 3.4972 5.7964 3.1336 5.4466C2.7712 5.0986 2.5996 4.6642 2.6344 4.2034L2.6464 1.564Z",fill:"#7E8CA8",stroke:"#7E8CA8",strokeWidth:.2}))),r||(r=n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_3988_5619"},n.createElement("rect",{width:14,height:14,fill:"white"})))))}const i=n.forwardRef(o);s.p},3357:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var a,r=s(2791),n=s(4420),l=s(8933),o=s(9825),i=s(9297);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c.apply(this,arguments)}function d(e,t){let{title:s,titleId:n,...l}=e;return r.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,a||(a=r.createElement("path",{d:"M13.9797 3.87336C13.9792 3.37202 13.7836 2.90098 13.4287 2.54695C12.6968 1.81672 11.507 1.81773 10.776 2.54969L3.22424 10.1318C2.97861 10.3773 2.79111 10.6811 2.68198 11.0106L2.67493 11.0321L2 14L4.9762 13.3337L4.99835 13.3264C5.32794 13.2172 5.63199 13.0299 5.87827 12.7837L13.431 5.2007C13.7852 4.84602 13.9801 4.37462 13.9797 3.87336ZM3.65042 12.6705L3.33484 12.3547L3.56271 11.3524L4.65521 12.4455L3.65042 12.6705ZM12.7677 4.53914L5.43533 11.901L4.10754 10.5724L9.13022 5.52955L9.89505 6.29438L10.5574 5.632L9.79123 4.8658L10.5038 4.15049L11.2714 4.91807L11.9337 4.25569L11.1648 3.48674L11.4392 3.21125C11.8049 2.84504 12.4007 2.84449 12.7671 3.21006C12.9447 3.38731 13.0426 3.62315 13.0429 3.8741C13.0431 4.12513 12.9456 4.36107 12.7677 4.53914ZM6.92792 13.0531H13.9797V13.9898H5.99435L6.92792 13.0531Z",fill:"black",fillOpacity:.5})))}const p=r.forwardRef(d);s.p;var u=s(9880),_=s(5818),h=s(2887),x=s(4746),m=s(7992),j=s(7438);const g={wrapper:"LectureConstructor_wrapper__yUm7p",blocksWrapper:"LectureConstructor_blocksWrapper__zFVhI",toolsWrapper:"LectureConstructor_toolsWrapper__Ihor8",addBlockBtns:"LectureConstructor_addBlockBtns__-dmXw",saveBtn:"LectureConstructor_saveBtn__-2L5v",saveIcon:"LectureConstructor_saveIcon__2FmHh",block:"LectureConstructor_block__wEXdD",titleInput:"LectureConstructor_titleInput__w9E3C",deleteBtn:"LectureConstructor_deleteBtn__kuuub",uploaderWrapper:"LectureConstructor_uploaderWrapper__6Vjw5",imagesWrapper:"LectureConstructor_imagesWrapper__qCZkW","grid-1":"LectureConstructor_grid-1__tV572","grid-2":"LectureConstructor_grid-2__qyvnr","grid-3":"LectureConstructor_grid-3__zdNqg","grid-4":"LectureConstructor_grid-4__ijNyM","grid-5":"LectureConstructor_grid-5__rkA5i","grid-6":"LectureConstructor_grid-6__vG3jC",imageWrapper:"LectureConstructor_imageWrapper__c3+IB",descWrapper:"LectureConstructor_descWrapper__9R-Ya",deleteIcon:"LectureConstructor_deleteIcon__bHfLR",uploadedDocsWrapper:"LectureConstructor_uploadedDocsWrapper__k9int",linksWrapper:"LectureConstructor_linksWrapper__QWSrE",link:"LectureConstructor_link__wPLYo",linkIcon:"LectureConstructor_linkIcon__SRIPJ",deleteLinkBtn:"LectureConstructor_deleteLinkBtn__R9frJ",addNewLinkBtn:"LectureConstructor_addNewLinkBtn__44Dcw"};var w=s(3329);const v=e=>{let{value:t,setValue:s}=e;return(0,w.jsx)(j.Z,{className:g.titleInput,value:t,onChange:s,minRows:1,maxRows:4,placeholder:"Block title",fontSize:16})};var C=s(7228);const f=e=>{let{value:t,setValue:s}=e;return(0,w.jsx)(C.Z,{placeholder:"Block text",value:t,setValue:s})},q=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})};var k=s(5772);const y=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),(0,w.jsx)(k.Z,{type:"pdf",accept:"application/pdf",className:g.uploaderWrapper,uploadedFilePath:t.file_path,setUploadedFilePath:s.filePath,requestConfig:{url:"lesson/upload/file",formDataKey:"file"}}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})},b=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),(0,w.jsx)(k.Z,{type:"video",accept:"video/*",className:g.uploaderWrapper,uploadedFilePath:t.file_path,setUploadedFilePath:s.filePath,requestConfig:{url:"lesson/upload/file",formDataKey:"file"}}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})},L=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),(0,w.jsx)(k.Z,{type:"audio",accept:"audio/*",className:g.uploaderWrapper,uploadedFilePath:t.file_path,setUploadedFilePath:s.filePath,requestConfig:{url:"lesson/upload/file",formDataKey:"file"}}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})};var N=s(9253);const O=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),0!==t.files.length&&(0,w.jsx)(N.Z,{styles:g,imagesData:t.files,isDesc:!0,setDescription:s.setDescription,handleDeleteFile:s.deleteFile,disabled:!1}),t.files.length<6&&(0,w.jsx)(k.Z,{className:g.uploaderWrapper,type:"image",accept:"image/*",setUploadedFile:s.addFile,requestConfig:{url:"lesson/upload/file",formDataKey:"file"}}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})};var W=s(8294);const D=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),0!==t.files.length&&(0,w.jsx)("div",{className:g.uploadedDocsWrapper,children:t.files.map((e=>(0,w.jsx)(W.Z,{file:e},e.filename)))}),(0,w.jsx)(k.Z,{className:g.uploaderWrapper,type:"doc",accept:"*/*",setUploadedFile:s.addFile,requestConfig:{url:"lesson/upload/file",formDataKey:"file"}}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})};var P=s(985),V=s(2297);const B=e=>{let{partData:t,setters:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v,{value:t.a_title,setValue:s.title}),(0,w.jsxs)("div",{className:g.linksSectionWrapper,children:[0!==t.links.length&&(0,w.jsx)("div",{className:g.linksWrapper,children:t.links.map(((e,t)=>(0,w.jsxs)("div",{className:g.link,children:[(0,w.jsx)(P.r,{className:g.linkIcon}),(0,w.jsx)(j.Z,{placeholder:"Put your link here...",className:g.linkInput,value:e.link,onChange:e=>s.onChangeLink(t,"link",e),maxRows:1}),(0,w.jsx)(j.Z,{placeholder:"Write link description here...",className:g.linkInput,value:e.anchor,onChange:e=>s.onChangeLink(t,"anchor",e),maxRows:1}),(0,w.jsx)("button",{className:g.deleteLinkBtn,onClick:()=>s.deleteLink(t),children:(0,w.jsx)(m.r,{})})]},t)))}),(0,w.jsxs)("button",{className:g.addNewLinkBtn,onClick:s.addLink,children:[(0,w.jsx)(V.r,{}),(0,w.jsx)("span",{children:"Add link"})]})]}),(0,w.jsx)(f,{value:t.a_text,setValue:s.text})]})},S={text:{a_title:"",a_text:"",hidden:!1},file:{a_title:"",a_text:"",hidden:!1,filename:"",file_path:"",file_size:1,file_description:"",download_allowed:!1},files:{a_title:"",a_text:"",hidden:!1,files:[]},links:{a_title:"",a_text:"",hidden:!1,links:[]}},T=[{a_type:"text",template:S.text},{a_type:"present",template:S.file},{a_type:"audio",template:S.file},{a_type:"video",template:S.file},{a_type:"picture",template:S.files},{a_type:"file",template:S.files},{a_type:"link",template:S.links}],I={test:{q_text:"",q_score:0,hedden:!1,answers:[]},boolean:{q_text:"",q_score:0,hedden:!1,answers:[{a_text:"true",is_correct:!1},{a_text:"false",is_correct:!1}]},answer_with_photo:{q_text:"",q_score:0,hedden:!1,answers:[]},question_with_photo:{q_text:"",q_score:0,hedden:!1,image_path:void 0,answers:[]},multiple_choice:{q_text:"",q_score:0,hedden:!1,answers:[]},matching:{q_text:"Please make the correct pairs",q_score:0,hedden:!1,answers:[]}},Z=[{q_type:"test",label:"classic",template:I.test},{q_type:"boolean",label:"true or false",template:I.boolean},{q_type:"answer_with_photo",label:"photo answers",template:I.answer_with_photo},{q_type:"question_with_photo",label:"photo question",template:I.question_with_photo},{q_type:"multiple_choice",label:"multiple choice",template:I.multiple_choice},{q_type:"matching",label:"matching",template:I.matching}];var A=s(7770),F=s(4034),E=s(3126);const Q="SaveBtn_saveBtn__gpAtE",M="SaveBtn_saveIcon__VTHoh",U=e=>{let{handleClick:t,className:s,isLoading:a}=e;return(0,w.jsx)("button",{className:"".concat(Q," ").concat(s||""),onClick:t,children:a?(0,w.jsx)(E.Z,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(F.r,{className:M}),(0,w.jsx)("span",{children:"Save"})]})})},R=e=>{let{handleAddBlock:t,handleSaveLectureParts:s}=e;const a=(0,n.v9)(i.V);return(0,w.jsxs)("div",{className:g.toolsWrapper,children:[(0,w.jsx)("ul",{className:g.addBlockBtns,children:T.map((e=>(0,w.jsx)("li",{children:(0,w.jsx)("button",{onClick:()=>t(e),children:e.a_type})},"".concat(e.a_type,".").concat((0,A.O)()))))}),(0,w.jsx)(U,{isLoading:a,handleClick:s})]})},H=()=>{const{blocks:e,handleAddBlock:t,handleDeleteBlock:s,getSetters:a,handleSaveLectureParts:r}=(0,_.E)(),n=e=>{const t=a(e);switch(e.a_type){case"text":return(0,w.jsx)(q,{partData:e,setters:t});case"present":return(0,w.jsx)(y,{partData:e,setters:t});case"video":return(0,w.jsx)(b,{partData:e,setters:t});case"audio":return(0,w.jsx)(L,{partData:e,setters:t});case"picture":return(0,w.jsx)(O,{partData:e,setters:t});case"file":return(0,w.jsx)(D,{partData:e,setters:t});case"link":return(0,w.jsx)(B,{partData:e,setters:t});default:return null}};return(0,w.jsxs)("div",{className:g.wrapper,children:[(0,w.jsx)("div",{className:g.blocksWrapper,children:[...e].sort(((e,t)=>e.a_number-t.a_number)).map((e=>(0,w.jsxs)("div",{className:g.block,children:[n(e),(0,w.jsxs)("button",{className:g.deleteBtn,onClick:()=>s(e.id),children:[(0,w.jsx)("span",{children:"Delete this block"}),(0,w.jsx)(m.r,{})]})]},e.id)))}),(0,w.jsx)(R,{handleAddBlock:t,handleSaveLectureParts:r})]})},z={wrapper:"TestConstructor_wrapper__eTloT",blocksWrapper:"TestConstructor_blocksWrapper__Mvv5A",toolsWrapper:"TestConstructor_toolsWrapper__SjFq+",addBlockBtns:"TestConstructor_addBlockBtns__iX55y",attemptsWrapper:"TestConstructor_attemptsWrapper__W1UGF",changeValueBtn:"TestConstructor_changeValueBtn__mySWW",block:"TestConstructor_block__Sx36u",new:"TestConstructor_new__x4x5E",edit:"TestConstructor_edit__wF2b3",deleteBtn:"TestConstructor_deleteBtn__CLX+h",scoreWrapper:"TestConstructor_scoreWrapper__btl-p",scoreInput:"TestConstructor_scoreInput__GLhih",questionWrapper:"TestConstructor_questionWrapper__IkF3P",optionsWrapper:"TestConstructor_optionsWrapper__yEKp5",optionsList:"TestConstructor_optionsList__ng5t0",optionLetter:"TestConstructor_optionLetter__sz7Qt",optionCheckbox:"TestConstructor_optionCheckbox__5kfOS",deleteOptionBtn:"TestConstructor_deleteOptionBtn__Y5xT8",addNewOptionBtn:"TestConstructor_addNewOptionBtn__aslmc",imageUploaderWrapper:"TestConstructor_imageUploaderWrapper__VzcCq",answerImageUploader:"TestConstructor_answerImageUploader__91C8B",matchingPairWrapper:"TestConstructor_matchingPairWrapper__Liws1"};var K=s(7356);const G=e=>{let{value:t,setValue:s}=e;return(0,w.jsx)(j.Z,{value:t,onChange:s,fontSize:16,minRows:2,maxRows:4,placeholder:"Write your question here..."})};var Y=s(8597);const X=e=>{let{value:t,maxValue:s,setValue:a,score:r}=e;return(0,w.jsx)(Y.Z,{min:1,max:s,value:t,onChange:a,size:"small",className:z.scoreInput,addonBefore:"Score:",addonAfter:"/ ".concat(r)})},J=e=>{let{handleAddNewOption:t,disabled:s=!1,matching:a=!1}=e;const r=a?"Add one more pair":"Add option";return(0,w.jsxs)("button",{className:z.addNewOptionBtn,disabled:s,onClick:t,title:s?"You can not add more options for this type of test":r,children:[(0,w.jsx)(V.r,{}),(0,w.jsx)("span",{children:r})]})},$=e=>{let{children:t,handleAddOption:s,canAddOption:a=!0,matching:r=!1}=e;return(0,w.jsxs)("div",{className:z.optionsWrapper,children:[(0,w.jsx)("ul",{className:z.optionsList,children:t}),(0,w.jsx)(J,{handleAddNewOption:s,disabled:!a,matching:r})]})},ee=e=>{let{handleDeleteOption:t,matching:s=!1,disabled:a=!1}=e;const r=s?"Delete this pair":"Delete this option";return(0,w.jsx)("button",{className:z.deleteOptionBtn,onClick:t,title:r,disabled:a,children:(0,w.jsx)(m.r,{})})};var te=s(4708);const se=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addOption,canAddOption:t.answers.length<4,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:z.optionLetter,children:(0,K.w)(t)}),(0,w.jsx)(j.Z,{placeholder:"Please write answer's option here...",value:e.a_text,onChange:e=>s.setOptionProperty(t,"a_text",e)}),(0,w.jsx)(te.Z,{className:z.optionCheckbox,checked:e.is_correct,onChange:e=>s.setCorrectAnswer(t,e.target.checked)}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t)})]},t)))})]})},ae=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addOption,canAddOption:t.answers.length<2,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:z.optionLetter,children:(0,K.w)(t)}),(0,w.jsx)(j.Z,{placeholder:"Please write answer's option here...",value:e.a_text,onChange:e=>s.setOptionProperty(t,"a_text",e),disabled:!0}),(0,w.jsx)(te.Z,{className:z.optionCheckbox,checked:e.is_correct,onChange:e=>s.setCorrectAnswer(t,e.target.checked)}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t),disabled:!0})]},t)))})]})},re=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addOption,canAddOption:t.answers.length<4,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:z.optionLetter,children:(0,K.w)(t)}),(0,w.jsx)(k.Z,{className:z.answerImageUploader,type:"image",accept:"image/*",uploadedFilePath:e.image_path,setUploadedFilePath:e=>s.setOptionProperty(t,"image_path",e),requestConfig:{url:"lesson/upload/file",formDataKey:"file"},renderDropZoneLabel:!1,renderProgressBar:!1}),(0,w.jsx)(j.Z,{placeholder:"Please write answer's option here...",value:e.a_text,onChange:e=>s.setOptionProperty(t,"a_text",e)}),(0,w.jsx)(te.Z,{className:z.optionCheckbox,checked:e.is_correct,onChange:e=>s.setCorrectAnswer(t,e.target.checked)}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t)})]},t)))})]})},ne=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsx)("div",{className:z.imageUploaderWrapper,children:(0,w.jsx)(k.Z,{type:"image",accept:"image/*",uploadedFilePath:t.image_path,setUploadedFilePath:e=>s.setQuestionProperty("image_path",e),requestConfig:{url:"lesson/upload/file",formDataKey:"file"}})}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addOption,canAddOption:t.answers.length<4,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:z.optionLetter,children:(0,K.w)(t)}),(0,w.jsx)(j.Z,{placeholder:"Please write answer's option here...",value:e.a_text,onChange:e=>s.setOptionProperty(t,"a_text",e)}),(0,w.jsx)(te.Z,{className:z.optionCheckbox,checked:e.is_correct,onChange:e=>s.setCorrectAnswer(t,e.target.checked)}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t)})]},t)))})]})},le=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addOption,canAddOption:t.answers.length<8,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:z.optionLetter,children:(0,K.w)(t)}),(0,w.jsx)(j.Z,{placeholder:"Please write answer's option here...",value:e.a_text,onChange:e=>s.setOptionProperty(t,"a_text",e)}),(0,w.jsx)(te.Z,{className:z.optionCheckbox,checked:e.is_correct,onChange:e=>s.setCorrectAnswer(t,e.target.checked)}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t)})]},t)))})]})},oe=e=>{let{partData:t,setters:s,maxScore:a,index:r,testScore:n}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X,{value:t.q_score,setValue:e=>s.setQuestionProperty("q_score",e),maxValue:a,score:n}),(0,w.jsxs)("div",{className:z.questionWrapper,children:[(0,w.jsx)("span",{children:"".concat(r+1,")")}),(0,w.jsx)(G,{value:t.q_text,setValue:e=>s.setQuestionProperty("q_text",e)})]}),(0,w.jsx)($,{handleAddOption:s.addMatchingPair,canAddOption:t.answers.length<6,matching:!0,children:t.answers.map(((e,t)=>(0,w.jsxs)("li",{children:[(0,w.jsxs)("div",{className:z.matchingPairWrapper,children:[(0,w.jsx)(j.Z,{placeholder:"Please write left part of pair here...",value:e.left_text,onChange:e=>s.setOptionProperty(t,"left_text",e)}),(0,w.jsx)(j.Z,{placeholder:"Please write right part of pair here...",value:e.right_text,onChange:e=>s.setOptionProperty(t,"right_text",e)})]}),(0,w.jsx)(ee,{handleDeleteOption:()=>s.deleteOption(t)})]},t)))})]})},ie=e=>{let{handleAddBlock:t,attempts:s,score:a,timer:n,changeTestMetaData:l,blocksScore:o,handleSaveTestParts:i,isLoading:c}=e;const[d,u]=(0,r.useState)(!0),[_,h]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!0),[j,g]=(0,r.useState)(s||10),[v,C]=(0,r.useState)(a||120),[f,q]=(0,r.useState)(n||40);return(0,w.jsxs)("div",{className:z.toolsWrapper,children:[(0,w.jsxs)("div",{className:z.attemptsWrapper,children:[(0,w.jsx)(Y.Z,{min:1,value:j,onChange:e=>g(e),addonBefore:"Attempts:",disabled:d,className:z.toolsInputNumber}),(0,w.jsx)("button",{className:z.changeValueBtn,onClick:()=>{d?u(!1):j!==s?l({attempts:j}).then((()=>u(!0))):u(!0)},title:d?"change attempts":"save changes",children:d?(0,w.jsx)(p,{}):(0,w.jsx)(F.r,{})})]}),(0,w.jsxs)("div",{className:z.attemptsWrapper,children:[(0,w.jsx)(Y.Z,{min:1,value:v,onChange:e=>C(e),addonBefore:"Score:",disabled:_,className:z.toolsInputNumber,status:o!==v?"error":null}),(0,w.jsx)("button",{className:z.changeValueBtn,onClick:()=>{_?h(!1):v!==a?l({score:v}).then((()=>{o===v&&h(!0)})):h(!0)},title:_?"change score":"save changes",children:_?(0,w.jsx)(p,{}):(0,w.jsx)(F.r,{})})]}),(0,w.jsxs)("div",{className:z.attemptsWrapper,children:[(0,w.jsx)(Y.Z,{min:1,value:f,onChange:e=>q(e),addonBefore:"Timer:",disabled:x,className:z.toolsInputNumber}),(0,w.jsx)("button",{className:z.changeValueBtn,onClick:()=>{x?m(!1):f!==n?l({timer:f}).then((()=>m(!0))):m(!0)},title:x?"change timer":"save changes",children:x?(0,w.jsx)(p,{}):(0,w.jsx)(F.r,{})})]}),(0,w.jsx)("ul",{className:z.addBlockBtns,children:Z.map((e=>(0,w.jsx)("li",{children:(0,w.jsx)("button",{onClick:()=>t(e),children:e.label})},"".concat(e.q_type))))}),(0,w.jsx)(U,{handleClick:i,isLoading:c})]})};var ce=s(8185),de=s(5519);const pe=e=>e.map((e=>{if("matching"===e.q_type){console.log(e);const t=e.answers.left.map((t=>{let{id:s,value:a}=t;return{a_id:s,left_text:a,right_text:e.answers.right.find((e=>{let{id:t}=e;return t===s})).value}}));return{...e,answers:t,id:e.q_id}}return{...e,id:e.q_id}})),ue=e=>{let{attempts:t,initialBlocks:s=[],score:a,timer:l,testId:c,lessonType:d}=e;const[p,u]=(0,r.useState)(pe(s)),[_,h]=(0,ce.Z)(),x=(0,n.I0)(),j=(0,n.v9)(i.V),g=p.reduce(((e,t)=>{let{q_score:s}=t;return e+s}),0),v=p.reduce(((e,t)=>Math.max(t.q_number,e)),0),C=(e,t)=>{const s={setQuestionProperty:function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return((e,t,s)=>{u((a=>a.map((a=>a.id!==e?a:{...a,[t]:s}))))})(e.id,...s)},addOption:()=>{return t=e.id,void u((e=>e.map((e=>(console.log(e),e.id!==t?e:{...e,answers:[...e.answers,{a_text:"",is_correct:!1,image_path:null}]})))));var t},addMatchingPair:()=>{return t=e.id,void u((e=>e.map((e=>e.id!==t?e:{...e,answers:[...e.answers,{right_text:"",left_text:""}]}))));var t},deleteOption:t=>((e,t)=>{u((s=>s.map((s=>{if(s.id!==e)return s;if(s.answers[t].a_id&&"matching"!==s.q_type)try{x((0,o.Q1)({testId:c,answer_id:s.answers[t].a_id,lessonType:d})).unwrap().then((()=>{_.success({content:"Answer has been deleted",duration:3})}))}catch(a){return _.error({content:a.message||a.detail.message,duration:3}),s}if(s.answers[t].a_id&&"matching"===s.q_type)try{x((0,o.i9)({testId:c,left_option_id:s.answers[t].a_id,lessonType:d})).unwrap().then((()=>{_.success({content:"Pair has been deleted",duration:3})}))}catch(a){return _.error({content:a.message||a.detail.message,duration:3}),s}return{...s,answers:[...s.answers.filter(((e,s)=>s!==t))]}}))))})(e.id,t),setOptionProperty:function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return((e,t,s,a)=>{u((r=>r.map((r=>r.id!==e?r:{...r,answers:r.answers.map(((e,r)=>r!==t?e:{...e,[s]:a}))}))))})(e.id,...s)},setCorrectAnswer:function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return((e,t,s,a)=>{u((r=>r.map((r=>e!==r.id?r:{...r,answers:r.answers.map(((e,r)=>"multiple_choice"===t?s!==r?e:{...e,is_correct:a}:s===r?{...e,is_correct:a}:{...e,is_correct:!0!==a&&e.is_correct}))}))))})(e.id,e.q_type,...s)}},r=p.reduce(((e,t)=>e-t.q_score),a)+e.q_score;switch(e.q_type){case"test":return(0,w.jsx)(se,{partData:e,setters:s,maxScore:r,index:t,testScore:a});case"boolean":return(0,w.jsx)(ae,{partData:e,setters:s,maxScore:r,index:t,testScore:a});case"answer_with_photo":return(0,w.jsx)(re,{partData:e,setters:s,maxScore:r,index:t,testScore:a});case"question_with_photo":return(0,w.jsx)(ne,{partData:e,setters:s,maxScore:r,index:t,testScore:a});case"multiple_choice":return(0,w.jsx)(le,{partData:e,setters:s,maxScore:r,index:t,testScore:a});case"matching":return(0,w.jsx)(oe,{partData:e,setters:s,maxScore:r,index:t,testScore:a});default:return null}};return(0,w.jsxs)("div",{className:z.wrapper,children:[h,(0,w.jsx)("div",{className:z.blocksWrapper,children:p.map(((e,t)=>(0,w.jsxs)("div",{className:"".concat(z.block," ").concat(e.q_id?z.edit:z.new),children:[C(e,t),(0,w.jsxs)("button",{className:z.deleteBtn,onClick:()=>{return t=e.id,void u((e=>e.filter((e=>{if(e.id===t){if(e.q_id)try{return x((0,o.R8)({testId:c,question_id:e.q_id,lessonType:d})).unwrap().then((()=>{_.success({content:"Block has been deleted",duration:3})})),!1}catch(s){return _.error({content:s.message||s.detail.message,duration:3}),!0}return!1}return!0}))));var t},children:[(0,w.jsx)("span",{children:"Delete this block"}),(0,w.jsx)(m.r,{})]})]},e.id)))}),(0,w.jsx)(ie,{handleAddBlock:e=>{u((t=>[...t,{id:(0,A.O)(),q_type:e.q_type,q_number:v+1,...e.template}]))},attempts:t,score:a,timer:l,changeTestMetaData:e=>x((0,o.SS)({testId:c,newTestMetaData:e,lessonType:d})).unwrap().then((()=>{_.success({content:"Test ".concat(Object.keys(e)[0]," has been updated")})})),blocksScore:g,handleSaveTestParts:()=>{const e=p.filter((e=>!e.q_id));if(0!==e.length)try{x((0,o.CZ)({testId:c,questionsData:e,lessonType:d})).unwrap().then((t=>{u((e=>{const s=e.filter((e=>e.q_id));return console.log(t),[...s,...t.map((e=>({...e,id:e.q_id})))]})),_.success({content:"Block".concat(1!==e.length?"s":""," ha").concat(1!==e.length?"ve":"s"," been created"),duration:3})}))}catch(a){_.error({content:a.message||a.detail.message||"Something went wrong",duration:3})}const t=p.filter((e=>e.q_id));if(0!==t.length){const e=pe(s);t.forEach((t=>{const s=e.find((e=>{let{q_id:s}=e;return s===t.q_id}));if((0,de.cM)(t,s)){const{q_id:e,q_text:s,q_score:r,q_number:n,image_path:l}=t,i="question_with_photo"===t.q_type?{q_text:s,q_score:r,q_number:n,image_path:l}:{q_text:s,q_score:r,q_number:n};try{x((0,o.QY)({testId:c,question_id:e,questionData:i,lessonType:d})).unwrap().then((()=>{_.success({content:"Question has been updated",duration:3})}))}catch(a){_.error({content:a.message,duration:3})}}const r=t.answers.filter((e=>!e.a_id));0!==r.length&&r.forEach((e=>{"matching"!==t.q_type&&x((0,o.c3)({testId:c,question_id:t.q_id,answerData:e,lessonType:d})).unwrap().then((e=>{u((s=>s.map((s=>{if(s.q_id!==t.q_id)return s;const a=s.answers.filter((t=>t.a_text!==e.a_text||t.image_path!==e.image_path));return{...s,answers:[...a,e]}})))),_.success({content:"Answers has been added",duration:3})})),"matching"===t.q_type&&x((0,o.xO)({testId:c,question_id:t.q_id,pairData:e,lessonType:d})).unwrap().then((e=>{u((s=>s.map((s=>{if(s.q_id!==t.q_id)return s;const a=s.answers.filter((t=>t.left_text!==e.left_text||t.right_text!==e.right_text));return{...s,answers:[...a,{left_text:e.left_text,right_text:e.right_text,a_id:e.left_id}]}})))),_.success({content:"Pair has been created",duration:3})}))}));const n=t.answers.filter((e=>e.a_id));0!==n.length&&n.forEach((e=>{const a=s.answers.find((t=>{let{a_id:s}=t;return e.a_id===s}));if((0,de.iR)(e,a,t.q_type)){const{a_id:s,...a}=e;"matching"!==t.q_type&&x((0,o.uo)({testId:c,question_id:t.q_id,answer_id:s,answerData:a,lessonType:d})).unwrap().then((()=>{_.success({content:"Answer has been updated",duration:3})})),"matching"===t.q_type&&x((0,o.fH)({testId:c,question_id:t.q_id,left_option_id:s,pairData:a,lessonType:d})).unwrap().then((()=>{_.success({content:"Pair has been updated",duration:3})}))}}))}))}},isLoading:j})]})};var _e=s(5309),he=s(5161),xe=s(2860);const me="TaskConstructor_constructorWrapper__I1dGs",je="TaskConstructor_lectureContentWrapper__DJq9p",ge="TaskConstructor_loaderWrapper__uAQ4c",we=()=>{const[e,t]=(0,r.useState)(0),{taskId:s}=(0,l.UO)(),a=(0,n.v9)(i._),c=(0,n.v9)(h.V),d=(0,n.v9)(x.bG).username,m=(0,n.v9)(i.V),j=(0,n.I0)(),g=a.find((e=>{let{id:t}=e;return t===+s})),v=null===g||void 0===g?void 0:g.type,C=null===g||void 0===g?void 0:g.course_id,f=c.find((e=>{let{id:t}=e;return t===+C})),q=null===f||void 0===f?void 0:f.title;(0,r.useEffect)((()=>{s&&d&&j((0,o.Ik)(+s))}),[s,d]);return(0,w.jsx)("div",{className:me,children:(()=>{var s,a,r,n,l;switch(v){case"lecture":return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(_.G,{children:[(0,w.jsx)(_e.Z,{lecture:g,switcherItems:[(0,w.jsx)(p,{}),(0,w.jsx)(u.r,{})],switcherValue:e,switcherOnChange:t}),0===e&&(0,w.jsx)(H,{}),1===e&&(0,w.jsx)("div",{className:je,children:(0,w.jsx)(xe.Z,{lecture:{courseName:q,...g}})})]})});case"test":case"exam":return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(he.Z,{test:g}),(0,w.jsx)(ue,{attempts:null===(s=g["".concat(v,"_data")])||void 0===s?void 0:s.attempts,initialBlocks:null===(a=g["".concat(v,"_data")])||void 0===a?void 0:a.questions,score:null===(r=g["".concat(v,"_data")])||void 0===r?void 0:r.score,testId:null===(n=g["".concat(v,"_data")])||void 0===n?void 0:n["".concat(v,"_id")],lessonType:g.type,timer:null===(l=g["".concat(v,"_data")])||void 0===l?void 0:l.timer})]});default:return(0,w.jsx)("div",{className:ge,children:m?(0,w.jsx)(E.Z,{}):(0,w.jsx)("p",{children:"Unknown lesson"})})}})()})}}}]);
//# sourceMappingURL=357.ff1a4810.chunk.js.map