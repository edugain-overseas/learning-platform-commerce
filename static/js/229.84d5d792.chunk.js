"use strict";(self.webpackChunklearning_platform_commerce=self.webpackChunklearning_platform_commerce||[]).push([[229],{6887:(e,a,n)=>{n.r(a),n.d(a,{default:()=>w});var s=n(2791),t=n(4420),r=n(7960),i=n(5667),o=n(5922),c=n(4746),l=n(5049);const m="EmailVerification_wrapper__EjSCh",u="EmailVerification_form__AMUzI",d="EmailVerification_emailInfo__REpLH",h="EmailVerification_sendAgain__WQhY3",p="EmailVerification_row__26w3g",f="EmailVerification_submitBtn__iuTaI";var g=n(489),_=n(3329);const v=e=>{let{email:a="",handleSubmit:n=(()=>{}),handleResendActivationCode:t=(()=>{})}=e;const[r,i]=(0,s.useState)("");return(0,_.jsx)("div",{className:m,children:(0,_.jsxs)("form",{className:u,onSubmit:e=>{e.preventDefault(),7===r.length&&n(r)},children:[(0,_.jsx)("h2",{children:"Email verification"}),(0,_.jsxs)("p",{className:d,children:["Let us know that this email address belongs to you. Enter the code from the email sent to ",(0,_.jsx)("span",{children:a||"your email"})]}),(0,_.jsx)("div",{className:p,children:(0,_.jsx)(g.Z,{name:"verificarion code",value:r,onChange:i})}),(0,_.jsx)("button",{type:"submit",className:f,children:(0,_.jsx)("span",{children:"Continue"})}),(0,_.jsxs)("p",{className:h,onClick:t,children:["Send the code ",(0,_.jsx)("span",{children:"again!"})]})]})})};var x=n(8933),j=n(6185);const w=()=>{const[e,a]=(0,s.useState)(!1),[n,m]=(0,s.useState)(null),[u,d]=r.ZP.useMessage(),[h,p]=(0,s.useState)(""),f=(0,t.v9)(c.hP),g=(0,x.TH)(),{handleOpen:w}=(0,j.j)(),y=g.search,E=new URLSearchParams(y).get("verification"),S=new URLSearchParams(y).get("username");console.log(S);const b=(0,x.s0)();(0,s.useLayoutEffect)((()=>{var e;f&&(null!==(e=g.state)&&void 0!==e&&e.from&&(b(g.state.from),g.state.navigateFromCart&&w()),b("/"))}),[f]);const C=(0,t.I0)();return(0,_.jsxs)(_.Fragment,{children:[d,e||E?(0,_.jsx)(v,{handleSubmit:e=>{const a={username:S||n.username,code:e};try{C((0,i.Hi)(a)).then((e=>console.log(e)))}catch(s){console.error("Axios Error:",s)}},email:null===n||void 0===n?void 0:n.email,handleResendActivationCode:async()=>{try{const e=await(0,o.tm)(S||n.username),a=e.data.message;200===e.status&&u.open({type:"success",content:"".concat(a," ").concat(n.email&&n.email)})}catch(e){u.open({type:"error",content:"Something went wrong. Please try again"})}}}):(0,_.jsx)(l.Z,{handleSubmit:async e=>{const n={name:e.firstname,surname:e.lastname,username:e.username,email:e.email,password:e.password};try{const s=await(0,o.r4)(n);console.log(s),201===s.status&&u.open({type:"success",content:s.data.message}),m({username:e.username,email:e.email}),a(!0)}catch(s){console.error("Axios Error:",s);const e=s.response.data.detail;422===s.response.status&&(u.open({type:"error",content:e}),e==="User with email ".concat(n.email," does exist")&&b("/login?username=".concat(n.username,"&email=").concat(n.email)),e.includes("username")&&p("username"),e.includes("email")&&p("email"))}},type:"registration",errorField:h,resetError:()=>{p("")}})]})}}}]);
//# sourceMappingURL=229.84d5d792.chunk.js.map