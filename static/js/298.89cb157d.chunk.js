"use strict";(self.webpackChunklearning_platform_commerce=self.webpackChunklearning_platform_commerce||[]).push([[298],{4348:(e,s,r)=>{r.r(s),r.d(s,{default:()=>P});var a=r(2791),t=r(5049);const n="SingInForm_pageWrapper__4sDHr";var o=r(4420),c=r(5667),i=r(8933),l=r(4746),d=r(7960),m=r(5922),p=r(3341),u=r(489),v=r(4491);const h="PasswordRecovery_wrapper__VgXHZ",g="PasswordRecovery_form__2uAJz",y="PasswordRecovery_emailInfo__+uvWS",w="PasswordRecovery_sendAgain__FoMtd",_="PasswordRecovery_row__xjhCb",j="PasswordRecovery_submitBtn__KY2uu";var x=r(3329);const f=e=>{let{messageApi:s}=e;const[r,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[f,E]=(0,a.useState)(""),[P,S]=(0,a.useState)(!1),R=(0,o.I0)(),N=()=>{E("")};return(0,x.jsx)("div",{className:h,children:(0,x.jsxs)("form",{className:g,onSubmit:P?async e=>{if(e.preventDefault(),!(0,p.jE)(l))return s.open({type:"error",content:"Recovery code's length must be 6 characters"}),void E("Recovery code");const a={code:l,new_pass:n,email:r};R((0,c.Aj)({credentials:a,messageApi:s,setErrorField:E}))}:async e=>{if(e.preventDefault(),!(0,p.oH)(r))return s.open({type:"error",content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"Please write valid email."}),(0,x.jsx)("p",{children:"Example: example@mail.com"})]})}),void E("email");try{const e=await(0,m.c0)(r),a=e.data.message;200===e.status&&(s.open({type:"success",content:"".concat(a," ").concat(r)}),S(!0))}catch(a){const e=a.response.data.detail;404===a.response.status&&e.includes("email")?(s.open({type:"error",content:e}),E("email")):s.open({type:"error",content:"Something went wrong. Please try again"})}},children:[(0,x.jsx)("h2",{children:"Password recovery"}),(0,x.jsx)("p",{className:y,children:P?"Enter the received code to your email and enter a new password.":"Enter the email that was used for registration. We will send you a recovery code."}),P?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:_,children:(0,x.jsx)(u.Z,{name:"Recovery code",value:l,onChange:d,isError:"Recovery code"===f,resetError:N})}),(0,x.jsx)("div",{className:_,children:(0,x.jsx)(v.Z,{name:"New password",value:n,onChange:i,isError:"newPassword"===f,resetError:N})})]}):(0,x.jsx)("div",{className:_,children:(0,x.jsx)(u.Z,{name:"email",value:r,onChange:t,isError:"email"===f,resetError:N})}),(0,x.jsx)("button",{type:"submit",className:j,children:(0,x.jsx)("span",{children:"Continue"})}),P&&(0,x.jsxs)("p",{className:w,children:["Send the code ",(0,x.jsx)("span",{onClick:async()=>{try{const e=await(0,m.Kt)(r),a=e.data.message;200===e.status&&s.open({type:"success",content:"".concat(a," ").concat(r)})}catch(e){s.open({type:"error",content:"Something went wrong. Please try again"})}},children:"again!"})]})]})})};var E=r(6185);const P=()=>{const[e,s]=(0,a.useState)(""),[r,m]=d.ZP.useMessage(),[p,u]=(0,a.useState)(!1),v=(0,o.I0)(),h=(0,i.s0)(),g=(0,i.TH)(),{handleOpen:y}=(0,E.j)(),w=(0,o.v9)(l.hP);(0,a.useEffect)((()=>{if(w){var e,s,r;if(null!==(e=g.state)&&void 0!==e&&e.from)h(null===(s=g.state)||void 0===s?void 0:s.from),(null===(r=g.state)||void 0===r?void 0:r.navigateFromCart)&&y();h("/")}}),[w]);return(0,x.jsxs)("div",{className:n,children:[m,p?(0,x.jsx)(f,{messageApi:r}):(0,x.jsx)(t.Z,{handleSubmit:e=>{v((0,c.Fv)({credentials:e,messageApi:r,setErrorField:s,navigate:h}))},type:"login",errorField:e,resetError:()=>{s("")},setIsResetPassword:u,messageApi:r})]})}}}]);
//# sourceMappingURL=298.89cb157d.chunk.js.map